import{S as z,i as Q,s as X,e as b,t as N,k,c as j,a as U,h as $,d as h,m as T,b as B,g,J as R,X as K,E as x,w as ee,x as te,y as re,q as F,o as H,B as ne,V as oe,p as ie,n as se}from"../chunks/index-67f931fa.js";import{L as ae}from"../chunks/Link-adf1e847.js";import{b as le}from"../chunks/store-2fbec7ac.js";import"../chunks/paths-396f020f.js";import"../chunks/index-78d3ef8c.js";var W={},O={},V=34,A=10,q=13;function Y(o){return new Function("d","return {"+o.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function ce(o,t){var e=Y(o);return function(a,i){return t(e(a),i,o)}}function Z(o){var t=Object.create(null),e=[];return o.forEach(function(a){for(var i in a)i in t||e.push(t[i]=i)}),e}function _(o,t){var e=o+"",a=e.length;return a<t?new Array(t-a+1).join(0)+e:e}function fe(o){return o<0?"-"+_(-o,6):o>9999?"+"+_(o,6):_(o,4)}function ue(o){var t=o.getUTCHours(),e=o.getUTCMinutes(),a=o.getUTCSeconds(),i=o.getUTCMilliseconds();return isNaN(o)?"Invalid Date":fe(o.getUTCFullYear())+"-"+_(o.getUTCMonth()+1,2)+"-"+_(o.getUTCDate(),2)+(i?"T"+_(t,2)+":"+_(e,2)+":"+_(a,2)+"."+_(i,3)+"Z":a?"T"+_(t,2)+":"+_(e,2)+":"+_(a,2)+"Z":e||t?"T"+_(t,2)+":"+_(e,2)+"Z":"")}function me(o){var t=new RegExp('["'+o+`
\r]`),e=o.charCodeAt(0);function a(s,u){var d,p,m=i(s,function(C,w){if(d)return d(C,w-1);p=C,d=u?ce(C,u):Y(C)});return m.columns=p||[],m}function i(s,u){var d=[],p=s.length,m=0,C=0,w,L=p<=0,E=!1;s.charCodeAt(p-1)===A&&--p,s.charCodeAt(p-1)===q&&--p;function M(){if(L)return O;if(E)return E=!1,W;var I,S=m,y;if(s.charCodeAt(S)===V){for(;m++<p&&s.charCodeAt(m)!==V||s.charCodeAt(++m)===V;);return(I=m)>=p?L=!0:(y=s.charCodeAt(m++))===A?E=!0:y===q&&(E=!0,s.charCodeAt(m)===A&&++m),s.slice(S+1,I-1).replace(/""/g,'"')}for(;m<p;){if((y=s.charCodeAt(I=m++))===A)E=!0;else if(y===q)E=!0,s.charCodeAt(m)===A&&++m;else if(y!==e)continue;return s.slice(S,I)}return L=!0,s.slice(S,p)}for(;(w=M())!==O;){for(var D=[];w!==W&&w!==O;)D.push(w),w=M();u&&(D=u(D,C++))==null||d.push(D)}return d}function c(s,u){return s.map(function(d){return u.map(function(p){return v(d[p])}).join(o)})}function n(s,u){return u==null&&(u=Z(s)),[u.map(v).join(o)].concat(c(s,u)).join(`
`)}function r(s,u){return u==null&&(u=Z(s)),c(s,u).join(`
`)}function l(s){return s.map(f).join(`
`)}function f(s){return s.map(v).join(o)}function v(s){return s==null?"":s instanceof Date?ue(s):t.test(s+="")?'"'+s.replace(/"/g,'""')+'"':s}return{parse:a,parseRows:i,format:n,formatBody:r,formatRows:l,formatRow:f,formatValue:v}}function pe({reps:o,weight:t}){return t?o*t:o}function G(o){let t,e,a,i,c,n;return{c(){t=b("h1"),e=N("Import data"),a=k(),i=b("input"),this.h()},l(r){t=j(r,"H1",{});var l=U(t);e=$(l,"Import data"),l.forEach(h),a=T(r),i=j(r,"INPUT",{type:!0,accept:!0}),this.h()},h(){B(i,"type","file"),B(i,"accept","text/csv")},m(r,l){g(r,t,l),R(t,e),g(r,a,l),g(r,i,l),c||(n=K(i,"change",o[2]),c=!0)},p:x,d(r){r&&h(t),r&&h(a),r&&h(i),c=!1,n()}}}function J(o){let t,e,a,i,c;return i=new ae({props:{to:"exercises",$$slots:{default:[he]},$$scope:{ctx:o}}}),{c(){t=b("h1"),e=N("Data imported"),a=k(),ee(i.$$.fragment)},l(n){t=j(n,"H1",{});var r=U(t);e=$(r,"Data imported"),r.forEach(h),a=T(n),te(i.$$.fragment,n)},m(n,r){g(n,t,r),R(t,e),g(n,a,r),re(i,n,r),c=!0},i(n){c||(F(i.$$.fragment,n),c=!0)},o(n){H(i.$$.fragment,n),c=!1},d(n){n&&h(t),n&&h(a),ne(i,n)}}}function he(o){let t;return{c(){t=N("Go to exercises")},l(e){t=$(e,"Go to exercises")},m(e,a){g(e,t,a)},d(e){e&&h(t)}}}function P(o){let t,e,a,i,c;return{c(){t=b("h1"),e=N("Something went wrong"),a=k(),i=b("p"),c=N("Check the console")},l(n){t=j(n,"H1",{});var r=U(t);e=$(r,"Something went wrong"),r.forEach(h),a=T(n),i=j(n,"P",{});var l=U(i);c=$(l,"Check the console"),l.forEach(h)},m(n,r){g(n,t,r),R(t,e),g(n,a,r),g(n,i,r),R(i,c)},d(n){n&&h(t),n&&h(a),n&&h(i)}}}function de(o){let t,e,a,i,c,n=o[1]==="idle"&&G(o),r=o[1]==="success"&&J(o),l=o[1]==="error"&&P();return{c(){t=k(),e=b("div"),n&&n.c(),a=k(),r&&r.c(),i=k(),l&&l.c(),this.h()},l(f){oe('[data-svelte="svelte-gpjllq"]',document.head).forEach(h),t=T(f),e=j(f,"DIV",{class:!0});var s=U(e);n&&n.l(s),a=T(s),r&&r.l(s),i=T(s),l&&l.l(s),s.forEach(h),this.h()},h(){document.title="Import data",B(e,"class","content svelte-10k3ssc")},m(f,v){g(f,t,v),g(f,e,v),n&&n.m(e,null),R(e,a),r&&r.m(e,null),R(e,i),l&&l.m(e,null),c=!0},p(f,[v]){f[1]==="idle"?n?n.p(f,v):(n=G(f),n.c(),n.m(e,a)):n&&(n.d(1),n=null),f[1]==="success"?r?v&2&&F(r,1):(r=J(f),r.c(),F(r,1),r.m(e,i)):r&&(se(),H(r,1,1,()=>{r=null}),ie()),f[1]==="error"?l||(l=P(),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(f){c||(F(r),c=!0)},o(f){H(r),c=!1},d(f){f&&h(t),f&&h(e),n&&n.d(),r&&r.d(),l&&l.d()}}}function _e(o,t,e){let a="idle",i;function c(){i=this.files,e(0,i)}return o.$$.update=()=>{if(o.$$.dirty&1&&i){let n=i[0];const r=new FileReader;r.onabort=()=>console.log("file reading was aborted"),r.onerror=()=>console.log("file reading has failed"),r.onload=()=>{const l=r.result.toString(),f=me(";"),v=u=>u.toLowerCase().replace(/\s/g,"-").replace(/[^a-z0-9-]/g,""),s=f.parse(l);try{const u=s.map(d=>{const p=d["Exercise Name"],m=+d.Reps,C=+d.Weight.replace(",",".");return{date:new Date(d.Date),workoutName:d["Workout Name"],exerciseName:p,exerciseId:v(p),reps:m,weight:C,weightUnit:d["Weight Unit"],volume:pe({reps:m,weight:C})}});le.set(u),e(1,a="success")}catch(u){console.error(u),e(1,a="error")}},r.readAsText(n)}},[i,a,c]}class ke extends z{constructor(t){super(),Q(this,t,_e,de,X,{})}}export{ke as default};

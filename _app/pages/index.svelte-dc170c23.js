import{S as ee,i as te,s as re,e as I,t as F,c as R,a as D,h as B,d as y,b as O,Z as J,g as H,J as h,j as ae,E as z,w as oe,x as ue,y as ce,q as V,o as L,B as le,k as N,W as ie,m as k,X as G,p as fe,G as me,n as de}from"../chunks/index-74752a43.js";import{b as P}from"../chunks/store-0c3bbe75.js";import{b as he}from"../chunks/paths-396f020f.js";import"../chunks/index-41bc9e84.js";var Q={},W={},q=34,S=10,x=13;function ne(e){return new Function("d","return {"+e.map(function(r,t){return JSON.stringify(r)+": d["+t+'] || ""'}).join(",")+"}")}function pe(e,r){var t=ne(e);return function(n,s){return r(t(n),s,e)}}function X(e){var r=Object.create(null),t=[];return e.forEach(function(n){for(var s in n)s in r||t.push(r[s]=s)}),t}function _(e,r){var t=e+"",n=t.length;return n<r?new Array(r-n+1).join(0)+t:t}function _e(e){return e<0?"-"+_(-e,6):e>9999?"+"+_(e,6):_(e,4)}function ge(e){var r=e.getUTCHours(),t=e.getUTCMinutes(),n=e.getUTCSeconds(),s=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":_e(e.getUTCFullYear())+"-"+_(e.getUTCMonth()+1,2)+"-"+_(e.getUTCDate(),2)+(s?"T"+_(r,2)+":"+_(t,2)+":"+_(n,2)+"."+_(s,3)+"Z":n?"T"+_(r,2)+":"+_(t,2)+":"+_(n,2)+"Z":t||r?"T"+_(r,2)+":"+_(t,2)+"Z":"")}function se(e){var r=new RegExp('["'+e+`
\r]`),t=e.charCodeAt(0);function n(a,u){var d,f,l=s(a,function(C,v){if(d)return d(C,v-1);f=C,d=u?pe(C,u):ne(C)});return l.columns=f||[],l}function s(a,u){var d=[],f=a.length,l=0,C=0,v,A=f<=0,w=!1;a.charCodeAt(f-1)===S&&--f,a.charCodeAt(f-1)===x&&--f;function c(){if(A)return W;if(w)return w=!1,Q;var E,m=l,j;if(a.charCodeAt(m)===q){for(;l++<f&&a.charCodeAt(l)!==q||a.charCodeAt(++l)===q;);return(E=l)>=f?A=!0:(j=a.charCodeAt(l++))===S?w=!0:j===x&&(w=!0,a.charCodeAt(l)===S&&++l),a.slice(m+1,E-1).replace(/""/g,'"')}for(;l<f;){if((j=a.charCodeAt(E=l++))===S)w=!0;else if(j===x)w=!0,a.charCodeAt(l)===S&&++l;else if(j!==t)continue;return a.slice(m,E)}return A=!0,a.slice(m,f)}for(;(v=c())!==W;){for(var i=[];v!==Q&&v!==W;)i.push(v),v=c();u&&(i=u(i,C++))==null||d.push(i)}return d}function o(a,u){return a.map(function(d){return u.map(function(f){return g(d[f])}).join(e)})}function b(a,u){return u==null&&(u=X(a)),[u.map(g).join(e)].concat(o(a,u)).join(`
`)}function T(a,u){return u==null&&(u=X(a)),o(a,u).join(`
`)}function U(a){return a.map(p).join(`
`)}function p(a){return a.map(g).join(e)}function g(a){return a==null?"":a instanceof Date?ge(a):r.test(a+="")?'"'+a.replace(/"/g,'""')+'"':a}return{parse:n,parseRows:s,format:b,formatBody:T,formatRows:U,formatRow:p,formatValue:g}}function ve(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Ee(e,r){return fetch(e,r).then(ve)}function Ce(e,r,t,n){arguments.length===3&&typeof t=="function"&&(n=t,t=void 0);var s=se(e);return Ee(r,t).then(function(o){return s.parse(o,n)})}function ye({reps:e,weight:r}){return r?e*r:e}function K(e){const r=e["Exercise Name"],t=+e.Reps,n=+e.Weight.replace(",",".");return{date:new Date(e.Date),workoutName:e["Workout Name"],exerciseName:r,exerciseId:Te(r),reps:t,weight:n,weightUnit:e["Weight Unit"],volume:ye({reps:t,weight:n})}}function Te(e){return e.toLowerCase().replace(/\s/g,"-").replace(/[^a-z0-9-]/g,"")}function we(e){let r,t,n;return{c(){r=I("div"),t=F(e[1]),this.h()},l(s){r=R(s,"DIV",{role:!0,class:!0});var o=D(r);t=B(o,e[1]),o.forEach(y),this.h()},h(){O(r,"role","alert"),O(r,"class",n=J(e[0])+" svelte-14gfxpy")},m(s,o){H(s,r,o),h(r,t)},p(s,[o]){o&2&&ae(t,s[1]),o&1&&n!==(n=J(s[0])+" svelte-14gfxpy")&&O(r,"class",n)},i:z,o:z,d(s){s&&y(r)}}}function be(e,r,t){let{status:n}=r,{message:s}=r;return e.$$set=o=>{"status"in o&&t(0,n=o.status),"message"in o&&t(1,s=o.message)},[n,s]}class Ue extends ee{constructor(r){super(),te(this,r,be,we,re,{status:0,message:1})}}function $(e){let r,t;return r=new Ue({props:{status:e[1],message:e[2]}}),{c(){oe(r.$$.fragment)},l(n){ue(r.$$.fragment,n)},m(n,s){ce(r,n,s),t=!0},p(n,s){const o={};s&2&&(o.status=n[1]),s&4&&(o.message=n[2]),r.$set(o)},i(n){t||(V(r.$$.fragment,n),t=!0)},o(n){L(r.$$.fragment,n),t=!1},d(n){le(r,n)}}}function je(e){let r,t,n,s,o,b,T,U,p,g,a,u,d,f,l,C,v,A,w,c=(e[1]==="success"||e[1]==="error")&&$(e);return{c(){r=N(),t=I("div"),n=I("h1"),s=F("Import data"),o=N(),c&&c.c(),b=N(),T=I("h2"),U=F("Import your own data"),p=N(),g=I("input"),a=N(),u=I("h2"),d=F("Or..."),f=N(),l=I("button"),C=F("Use example dataset"),this.h()},l(i){ie('[data-svelte="svelte-gpjllq"]',document.head).forEach(y),r=k(i),t=R(i,"DIV",{class:!0});var m=D(t);n=R(m,"H1",{});var j=D(n);s=B(j,"Import data"),j.forEach(y),o=k(m),c&&c.l(m),b=k(m),T=R(m,"H2",{});var M=D(T);U=B(M,"Import your own data"),M.forEach(y),p=k(m),g=R(m,"INPUT",{type:!0,accept:!0}),a=k(m),u=R(m,"H2",{});var Y=D(u);d=B(Y,"Or..."),Y.forEach(y),f=k(m),l=R(m,"BUTTON",{});var Z=D(l);C=B(Z,"Use example dataset"),Z.forEach(y),m.forEach(y),this.h()},h(){document.title="Import data",O(g,"type","file"),O(g,"accept","text/csv"),O(t,"class","content svelte-10k3ssc")},m(i,E){H(i,r,E),H(i,t,E),h(t,n),h(n,s),h(t,o),c&&c.m(t,null),h(t,b),h(t,T),h(T,U),h(t,p),h(t,g),h(t,a),h(t,u),h(u,d),h(t,f),h(t,l),h(l,C),v=!0,A||(w=[G(g,"change",e[4]),G(l,"click",e[3])],A=!0)},p(i,[E]){i[1]==="success"||i[1]==="error"?c?(c.p(i,E),E&2&&V(c,1)):(c=$(i),c.c(),V(c,1),c.m(t,b)):c&&(de(),L(c,1,1,()=>{c=null}),fe())},i(i){v||(V(c),v=!0)},o(i){L(c),v=!1},d(i){i&&y(r),i&&y(t),c&&c.d(),A=!1,me(w)}}}function Ae(e,r,t){let n="idle",s,o;async function b(){try{const p=(await Ce(";",`${he}/example-dataset.csv`)).map(K);P.set(p),t(1,n="success"),t(2,s="Example data was loaded successfully")}catch{t(1,n="error"),t(2,s="Example data could not be loaded")}}function T(){o=this.files,t(0,o)}return e.$$.update=()=>{if(e.$$.dirty&1&&o){let U=o[0];const p=new FileReader;p.onabort=()=>console.log("file reading was aborted"),p.onerror=()=>console.log("file reading has failed"),p.onload=()=>{const g=p.result.toString(),u=se(";").parse(g);try{const d=u.map(K);P.set(d),t(1,n="success"),t(2,s="Your file was loaded successfully")}catch(d){console.error(d),t(1,n="error"),t(2,s="Your file could not be loaded")}},p.readAsText(U)}},[o,n,s,b,T]}class De extends ee{constructor(r){super(),te(this,r,Ae,je,re,{})}}export{De as default};
